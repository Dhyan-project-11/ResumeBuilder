<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Resume Builder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --main-color: #2c3e50; --bg-color: #f0f4f8; }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background-color: var(--bg-color); margin: 0; padding: 20px; color: #333; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 40px; border-radius: 12px; box-shadow: 0 5px 25px rgba(0,0,0,0.1); }
        
        header, footer { padding: 30px; text-align: center; color: white; background-color: var(--main-color); margin: -40px -40px 40px -40px; border-radius: 12px 12px 0 0; position: relative; }
        footer { margin: 40px -40px -40px -40px; border-radius: 0 0 12px 12px; }

        .settings-icon { position: absolute; right: 25px; top: 25px; cursor: pointer; font-size: 1.4rem; }
        .color-picker { display: none; position: absolute; right: 25px; top: 70px; background: white; padding: 10px; border: 1px solid #ddd; z-index: 100; border-radius: 8px; box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .color-btn { width: 30px; height: 30px; border-radius: 50%; border: 2px solid white; cursor: pointer; margin: 5px; }

        section { margin-bottom: 35px; padding-bottom: 20px; border-bottom: 1px solid #eee; }
        h3 { color: var(--main-color); border-left: 6px solid var(--main-color); padding-left: 15px; margin-bottom: 25px; text-transform: uppercase; }

        .grid-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 15px; }
        .personal-flex { display: flex; gap: 30px; }
        .fields-grid { flex: 3; }
        .photo-upload-box { flex: 1; border: 2px dashed #ccc; height: 220px; border-radius: 10px; display: flex; flex-direction: column; align-items: center; justify-content: center; background: #fafafa; position: relative; overflow: hidden; }
        .photo-upload-box img { width: 100%; height: 100%; object-fit: cover; position: absolute; }
        .photo-upload-box input { position: absolute; opacity: 0; width: 100%; height: 100%; cursor: pointer; z-index: 2; }

        input, textarea { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 14px; outline: none; transition: all 0.3s; }
        input:hover, textarea:hover { border-color: var(--main-color); background-color: #f9fbff; }
        input:required { border-right: 4px solid #e74c3c; }

        .dynamic-item { background: #fdfdfd; padding: 20px; border: 1px solid #eee; margin-bottom: 15px; border-radius: 8px; position: relative; }
        .controls { display: flex; justify-content: flex-end; gap: 10px; margin-top: 10px; }
        .btn-icon { background: none; border: none; cursor: pointer; color: #888; font-size: 1.1rem; }
        .add-btn { background: #27ae60; color: white; border: none; padding: 10px 18px; border-radius: 5px; cursor: pointer; font-weight: 600; }
        
        /* RESUME RESULT STYLES */
        #resume-output-page { display: none; }
        .res-header { display: flex; align-items: center; border-bottom: 3px solid var(--main-color); padding-bottom: 20px; margin-bottom: 30px; }
        .res-photo { width: 120px; height: 120px; border-radius: 8px; object-fit: cover; border: 2px solid #ddd; margin-right: 25px; }
        .res-info h1 { margin: 0; font-size: 2.2rem; color: var(--main-color); }
        .res-section { margin-bottom: 25px; }
        .res-section-title { font-weight: bold; text-transform: uppercase; color: var(--main-color); border-bottom: 1px solid #ddd; margin-bottom: 10px; font-size: 1.1rem; }
        .res-item { margin-bottom: 12px; }
        .res-meta { color: #666; font-style: italic; font-size: 0.9rem; }
        .res-skills-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; }
        .no-print { margin-top: 30px; text-align: center; }

        @media print { .no-print { display: none; } body { padding: 0; } .container { box-shadow: none; border: none; width: 100%; } }
    </style>
</head>
<body>

<div id="builder-page" class="container">
    <header id="h-main">
        <h1>Resume Builder</h1>
        <div class="settings-icon" onclick="togglePicker()"><i class="fas fa-palette"></i></div>
        <div class="color-picker" id="picker">
            <button class="color-btn" style="background:red;" onclick="setTheme('red')"></button>
            <button class="color-btn" style="background:blue;" onclick="setTheme('blue')"></button>
            <button class="color-btn" style="background:#f1c40f;" onclick="setTheme('#f1c40f')"></button>
            <button class="color-btn" style="background:purple;" onclick="setTheme('purple')"></button>
            <button class="color-btn" style="background:orange;" onclick="setTheme('orange')"></button>
            <button class="color-btn" style="background:green;" onclick="setTheme('green')"></button>
        </div>
    </header>

    <form onsubmit="generateResume(event)">
        <section>
            <h3>Personal Information</h3>
            <div class="personal-flex">
                <div class="fields-grid">
                    <div class="grid-row">
                        <input type="text" id="in-name" placeholder="Full Name" title="Name" required>
                        <input type="email" id="in-email" placeholder="Email" title="Email" required>
                    </div>
                    <div class="grid-row">
                        <input type="tel" id="in-phone" placeholder="Phone" title="Phone" oninput="this.value=this.value.replace(/[^0-9]/g,'');" required>
                        <input type="date" id="in-dob" title="Date of Birth" required>
                    </div>
                    <div class="grid-row">
                        <input type="url" id="in-link" placeholder="LinkedIn URL" title="LinkedIn" required>
                        <input type="url" id="in-git" placeholder="GitHub URL" title="GitHub" required>
                    </div>
                    <textarea id="in-obj" placeholder="Objective (100 words)" title="Objective" rows="3" required></textarea>
                </div>
                <div class="photo-upload-box">
                    <img id="preview-img" src="" style="display:none;">
                    <i class="fas fa-camera fa-2x" id="cam-icon"></i>
                    <input type="file" id="in-photo" accept="image/*" onchange="handleImage(this)">
                </div>
            </div>
        </section>

        <section>
            <h3>Work Experience</h3>
            <div id="work-list">
                <div class="dynamic-item work-box">
                    <div class="grid-row">
                        <input type="text" class="w-comp" placeholder="Company" title="Company" required>
                        <input type="text" class="w-role" placeholder="Role" title="Role" required>
                        <input type="date" class="w-start" onchange="calcExp(this)" title="Joining" required>
                        <input type="date" class="w-end" onchange="calcExp(this)" title="Ending" required>
                    </div>
                    <div class="exp-text" style="font-weight:bold; color:var(--main-color);">Experience: 0 Years</div>
                    <div class="controls">
                        <button type="button" class="btn-icon" onclick="move(this, 'up')">▲</button>
                        <button type="button" class="btn-icon" onclick="move(this, 'down')">▼</button>
                        <button type="button" class="btn-icon" onclick="delRow(this)"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
            </div>
            <button type="button" class="add-btn" onclick="addRow('work-list')">+ Add Work</button>
        </section>

        <section>
            <h3>Education</h3>
            <div id="edu-list">
                <div class="dynamic-item edu-box">
                    <div class="grid-row">
                        <input type="text" class="e-coll" placeholder="College" title="College" required>
                        <input type="text" class="e-cour" placeholder="Course" title="Course" required>
                        <input type="number" class="e-year" placeholder="Year" title="Year" required>
                        <input type="text" class="e-perc" placeholder="Percentage" title="Score" required>
                    </div>
                    <div class="controls">
                        <button type="button" class="btn-icon" onclick="move(this, 'up')">▲</button>
                        <button type="button" class="btn-icon" onclick="move(this, 'down')">▼</button>
                        <button type="button" class="btn-icon" onclick="delRow(this)"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
            </div>
            <button type="button" class="add-btn" onclick="addRow('edu-list')">+ Add Education</button>
        </section>

        <section>
            <h3>Projects</h3>
            <div id="proj-list">
                <div class="dynamic-item proj-box">
                    <div class="grid-row">
                        <input type="text" class="p-name" placeholder="Project Name" title="Name" required>
                        <input type="url" class="p-link" placeholder="Link" title="Link" required>
                    </div>
                    <textarea class="p-desc" placeholder="Details" title="Description" rows="2" style="margin-top:10px" required></textarea>
                    <div class="controls">
                        <button type="button" class="btn-icon" onclick="delRow(this)"><i class="fas fa-trash"></i></button>
                    </div>
                </div>
            </div>
            <button type="button" class="add-btn" onclick="addRow('proj-list')">+ Add Project</button>
        </section>

        <section>
            <h3>Skills & Hobbies</h3>
            <div class="res-skills-grid">
                <div id="s-personal"><strong>Personal Skills</strong><button type="button" class="btn-icon" onclick="addS('s-personal')"> +</button><div class="sk-list"></div></div>
                <div id="s-prof"><strong>Professional Skills</strong><button type="button" class="btn-icon" onclick="addS('s-prof')"> +</button><div class="sk-list"></div></div>
                <div id="s-tech"><strong>Technical Skills</strong><button type="button" class="btn-icon" onclick="addS('s-tech')"> +</button><div class="sk-list"></div></div>
            </div>
            <div id="hobby-list" style="margin-top:20px;">
                <strong>Hobbies</strong>
                <div style="display:flex; margin-top:10px;"><input type="text" class="h-input" placeholder="Hobby" title="Hobby" required></div>
            </div>
            <button type="button" class="add-btn" onclick="addH()">+ Add Hobby</button>
        </section>

        <section>
            <h3>Certifications</h3>
            <div id="cert-list">
                <div class="dynamic-item cert-box">
                    <input type="text" class="c-name" placeholder="Certificate Name" required style="margin-bottom:10px">
                    <input type="text" class="c-org" placeholder="Management/Organization" required style="margin-bottom:10px">
                    <textarea class="c-desc" placeholder="Brief Description" rows="2" required></textarea>
                    <div class="controls"><button type="button" class="btn-icon" onclick="delRow(this)"><i class="fas fa-trash"></i></button></div>
                </div>
            </div>
            <button type="button" class="add-btn" onclick="addRow('cert-list')">+ Add Certification</button>
        </section>

        <button type="submit" style="width:100%; padding:20px; background:var(--main-color); color:white; border:none; border-radius:8px; font-size:1.3rem; font-weight:bold; cursor:pointer;">SUBMIT & VIEW RESUME</button>
    </form>
    <footer id="f-main">Resume Builder Tool</footer>
</div>

<div id="resume-output-page" class="container">
    <div id="resume-target"></div>
    <div class="no-print">
        <button onclick="window.print()" class="add-btn" style="background:var(--main-color)">Download/Print PDF</button>
        <button onclick="location.reload()" class="add-btn" style="background:#7f8c8d; margin-left:10px;">Edit Resume</button>
    </div>
</div>

<script>
    let imageData = "";
    function handleImage(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();
            reader.onload = (e) => {
                document.getElementById('preview-img').src = e.target.result;
                document.getElementById('preview-img').style.display = 'block';
                document.getElementById('cam-icon').style.display = 'none';
                imageData = e.target.result;
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    function togglePicker() { const p = document.getElementById('picker'); p.style.display = p.style.display === 'block' ? 'none' : 'block'; }
    function setTheme(c) {
        document.documentElement.style.setProperty('--main-color', c);
        document.getElementById('h-main').style.backgroundColor = c;
        document.getElementById('f-main').style.backgroundColor = c;
        togglePicker();
    }

    function calcExp(el) {
        const p = el.closest('.work-box');
        const start = p.querySelector('.w-start').value;
        const end = p.querySelector('.w-end').value;
        if(start && end) {
            const years = ((new Date(end) - new Date(start)) / (1000*60*60*24*365.25)).toFixed(1);
            p.querySelector('.exp-text').innerText = "Experience: " + (years > 0 ? years : 0) + " Years";
        }
    }

    function addRow(id) {
        const list = document.getElementById(id);
        const clone = list.firstElementChild.cloneNode(true);
        clone.querySelectorAll('input, textarea').forEach(i => i.value = "");
        list.appendChild(clone);
    }

    function delRow(btn) {
        const list = btn.closest('.dynamic-item').parentElement;
        if(list.children.length > 1) btn.closest('.dynamic-item').remove();
        else alert("At least one entry is required!");
    }

    function move(btn, dir) {
        const item = btn.closest('.dynamic-item');
        if(dir === 'up' && item.previousElementSibling) item.parentNode.insertBefore(item, item.previousElementSibling);
        if(dir === 'down' && item.nextElementSibling) item.parentNode.insertBefore(item.nextElementSibling, item);
    }

    function addS(id) {
        const div = document.createElement('div');
        div.style.display = 'flex'; div.style.marginTop = '5px';
        div.innerHTML = `<input type="text" class="sk-input" placeholder="Skill" required> <button type="button" class="btn-icon" onclick="this.parentElement.remove()">×</button>`;
        document.getElementById(id).querySelector('.sk-list').appendChild(div);
    }

    function addH() {
        const div = document.createElement('div');
        div.style.marginTop = '5px';
        div.innerHTML = `<input type="text" class="h-input" placeholder="Hobby" required>`;
        document.getElementById('hobby-list').appendChild(div);
    }

    function generateResume(e) {
        e.preventDefault();
        document.getElementById('builder-page').style.display = 'none';
        document.getElementById('resume-output-page').style.display = 'block';

        let workH = "";
        document.querySelectorAll('.work-box').forEach(b => {
            workH += `<div class="res-item"><strong>${b.querySelector('.w-role').value}</strong> at ${b.querySelector('.w-company').value}<br>
            <span class="res-meta">${b.querySelector('.w-start').value} to ${b.querySelector('.w-end').value} | ${b.querySelector('.exp-text').innerText}</span></div>`;
        });

        let eduH = "";
        document.querySelectorAll('.edu-box').forEach(b => {
            eduH += `<div class="res-item"><strong>${b.querySelector('.e-cour').value}</strong><br>${b.querySelector('.e-coll').value} (${b.querySelector('.e-year').value}) | Grade: ${b.querySelector('.e-perc').value}</div>`;
        });

        let projH = "";
        document.querySelectorAll('.proj-box').forEach(b => {
            projH += `<div class="res-item"><strong>${b.querySelector('.p-name').value}</strong> - <a href="${b.querySelector('.p-link').value}">Project Link</a><p>${b.querySelector('.p-desc').value}</p></div>`;
        });

        let certH = "";
        document.querySelectorAll('.cert-box').forEach(b => {
            certH += `<div class="res-item"><strong>${b.querySelector('.c-name').value}</strong> - ${b.querySelector('.c-org').value}<p>${b.querySelector('.c-desc').value}</p></div>`;
        });

        let skillH = "";
        document.querySelectorAll('.sk-input').forEach(s => skillH += `<li>${s.value}</li>`);
        let hobbyH = "";
        document.querySelectorAll('.h-input').forEach(h => hobbyH += `<li>${h.value}</li>`);

        const output = `
            <div class="res-header">
                ${imageData ? `<img src="${imageData}" class="res-photo">` : ''}
                <div class="res-info">
                    <h1>${document.getElementById('in-name').value}</h1>
                    <p>${document.getElementById('in-email').value} | ${document.getElementById('in-phone').value}</p>
                    <p>DOB: ${document.getElementById('in-dob').value} | <a href="${document.getElementById('in-link').value}">LinkedIn</a> | <a href="${document.getElementById('in-git').value}">GitHub</a></p>
                </div>
            </div>
            <div class="res-section"><div class="res-section-title">Objective</div><p>${document.getElementById('in-obj').value}</p></div>
            <div class="res-section"><div class="res-section-title">Work Experience</div>${workH}</div>
            <div class="res-section"><div class="res-section-title">Education</div>${eduH}</div>
            <div class="res-section"><div class="res-section-title">Key Projects</div>${projH}</div>
            <div class="res-section"><div class="res-section-title">Certifications</div>${certH}</div>
            <div class="res-skills-grid">
                <div><div class="res-section-title">Skills</div><ul>${skillH}</ul></div>
                <div><div class="res-section-title">Interests & Hobbies</div><ul>${hobbyH}</ul></div>
            </div>
        `;
        document.getElementById('resume-target').innerHTML = output;
    }
</script>
</body>
</html>